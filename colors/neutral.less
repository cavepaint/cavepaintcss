@neutral-base: .set-neutral-base()[];

@neutral-lumafix: .set-average(@action, desaturate(@action, 100%);)[];

@neutral: .set-color(~"neutral", @neutral-lumafix, 0)[];

// .set-color(~"neutral", @neutral, 0, @outputs: true);

.set-neutral-base() when (green(@base-color) > 64) {
    @neutral-base: @teal;
}

.set-neutral-base() when (green(@base-color) > 128) {
    @neutral-base: average(@teal, @olive);
}

.set-neutral-base() when (green(@base-color) > 196) {
    @neutral-base: @olive;
}

.set-neutral-base() when (default()) {
    @neutral-base: @green;
}

.neutral {
    background-image+: url("data:image/svg+xml,@{neutral-bg-base}");

    @neutral-bg: escape(~"@{neutral}");
    @neutral-bg-base: "%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%202.646%202.646%22%20height%3D%2210%22%20width%3D%2210%22%3E%3Cpath%20fill%3D%22@{neutral-bg}%22%20fill-opacity%3D%22@{neutral-bg-fill-opacity}%22%20d%3D%22M0%200h2.646v2.646H0z%22%2F%3E%3C%2Fsvg%3E";
    @neutral-bg-fill-opacity: .33;

    &.texture {
        .texture;
    }

    &.pattern {
        .pattern;
    }
}