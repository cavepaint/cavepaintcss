// @texture: .set-pattern(@default-texture)[];
// @pattern: .set-pattern(@default-pattern)[];

@default-texture-source: @@default-texture;
@default-pattern-source: @@default-pattern;

@light-fill-opacity: if((luma(@base-color) > 50%), .16, .25);
@dark-fill-opacity: if((luma(@base-color) > 50%), .25, .16);

.texture, .pattern {
    background-position: top center;
}

.texture {
    background-image: url("data:image/svg+xml,@{default-texture-source}");
}

.pattern {
    background-image: url("data:image/svg+xml,@{default-pattern-source}");
}

.light {
    background-image: @light;

    @light-base: "%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%202.646%202.646%22%20height%3D%2210%22%20width%3D%2210%22%3E%3Cpath%20fill%3D%22@{light-fg}%22%20fill-opacity%3D%22@{light-fill-opacity}%22%20d%3D%22M0%200h2.646v2.646H0z%22%2F%3E%3C%2Fsvg%3E";
    @light-fg: escape(#ffffff);
    @light: url("data:image/svg+xml,@{light-base}");

    &.texture {
        background-image: url("data:image/svg+xml,@{light-base}"), url("data:image/svg+xml,@{default-texture-source}");
    }

    &.pattern {
        background-image: url("data:image/svg+xml,@{light-base}"), url("data:image/svg+xml,@{default-pattern-source}");
    }
}

.dark {
    background-image: @dark;

    @dark-base: "%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%202.646%202.646%22%20height%3D%2210%22%20width%3D%2210%22%3E%3Cpath%20fill%3D%22@{dark-fg}%22%20fill-opacity%3D%22@{dark-fill-opacity}%22%20d%3D%22M0%200h2.646v2.646H0z%22%2F%3E%3C%2Fsvg%3E";
    @dark-fg: escape(#000000);
    @dark: url("data:image/svg+xml,@{dark-base}");

    &.texture {
        background-image: url("data:image/svg+xml,@{dark-base}"), url("data:image/svg+xml,@{default-texture-source}");
    }

    &.pattern {
        background-image: url("data:image/svg+xml,@{dark-base}"), url("data:image/svg+xml,@{default-pattern-source}");
    }
}